(this["webpackJsonpdata-visualization"]=this["webpackJsonpdata-visualization"]||[]).push([[0],{35:function(t,e,n){},37:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){},41:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){},53:function(t,e,n){},54:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var c=n(19),r=n.n(c),o=n(29),a=n.n(o),i=(n(35),n(16)),s=n.n(i),u=n(14),l=n(17),d=n(20),p=n(9),f=n(15),h="CUSTOM_SCENARIO",j="DOC_OPEN",b="DOC_UPDATE",y="DOC_SYNC",O="DOC_CLOSE",m="INSERT",x="DELETE",g=(n(37),n(1));function v(t){var e=Object(p.a)(t,2),n=e[0],c=e[1];switch(n){case j:return n;case b:var r=c.id;return c.actions.map((function(t){if(t.type===m)return"".concat(n," Doc:").concat(r," type:").concat(t.type," pos:").concat(t.pos," str:").concat(t.str);if(t.type===x)return"".concat(n," Doc:").concat(r," type:").concat(t.type," pos:").concat(t.pos," len:").concat(t.len);throw new Error("Unexpect edit type: "+t.type)})).join(" ; ");case y:return void 0===c.index?"".concat(n," FromDoc:").concat(c.from," ToDoc:").concat(c.to):"".concat(n," FromDoc:").concat(c.from," ToDoc:").concat(c.to," updateIndex:").concat(c.index);case O:return n;default:throw new Error("Expected action: "+n)}}function C(t){var e="scenarios";var n=t.scenarios[t.currentScenario],c=n&&n[t.currentScenarioStepIndex-1],r=n&&n[t.currentScenarioStepIndex];return Object(g.jsxs)("div",{className:"scenarios",children:[Object(g.jsx)("label",{htmlFor:e,children:"Scenarios: "}),Object(g.jsxs)("select",{id:e,onChange:function(e){e.target.value!==t.currentScenario&&t.onScenarioChange(e.target.value)},children:[Object(g.jsx)("option",{value:h,children:"Custom"}),Object.keys(t.scenarios).map((function(t){return Object(g.jsx)("option",{value:t,children:t},t)}))]}),n&&Object(g.jsx)("button",{disabled:t.currentScenario===h,onClick:function(){var e=t.scenarios[t.currentScenario];t.currentScenarioStepIndex<e.length?t.onNextStep():t.onRestartStep()},className:"next-step-button",children:r?"Next step":"Restart"}),r&&Object(g.jsx)("span",{className:"next-step",children:v(r)}),c&&Object(g.jsxs)("p",{className:"current-step",children:[Object(g.jsx)("span",{className:"current-step-label",children:"Current step: "}),Object(g.jsx)("span",{children:v(c)})]})]})}n(39);function D(t){return Object(g.jsxs)("div",{className:"doc-tab",children:[t.editable&&Object(g.jsx)("button",{className:"doc-close",onClick:function(){t.onCloseDoc(t.doc)},children:"x"}),Object(g.jsxs)("p",{className:"doc-id",children:["Doc",t.doc.id]}),Object(g.jsxs)("span",{className:"doc-options",children:[t.doc.yDoc.gc&&Object(g.jsx)("span",{children:"GC\u2714\ufe0f"}),t.doc.pud&&Object(g.jsx)("span",{children:"PermanentUserData\u2714\ufe0f"})]})]})}var S="sample-key";n(40);function k(t,e,n){var c=function(t,e,n){for(var c=Math.min(Math.max(t.length-1,0),Math.max(e.length-1,0),n),r=0;r<=c;r++)if(t[r]!==e[r])return r;return 0===t.length||0===e.length?0:c+1}(t,e,n),r=function(t,e,n){for(var c=Math.min(Math.max(t.length-1,0),Math.max(e.length-n,0)),r=0;r<=c;r++)if(t[t.length-1-r]!==e[e.length-1-r])return r;return c}(t,e,n);if(c+r>t.length-1||c+r>e.length-1){var o=function(t,e,n){if(t.length>e.length)return{type:x,pos:n,len:t.length-e.length};if(t.length<e.length){var c=n-(e.length-t.length);return{type:m,pos:c,str:e.slice(c,n)}}return null}(t,e,n);return o?[o]:[]}var a={pos:c,len:t.length-r-c},i={pos:c,str:e.slice(c,e.length-r)},s=[];return a.len&&s.push({type:x,pos:a.pos,len:a.len}),i.str.length&&s.push({type:m,pos:i.pos,str:i.str}),s}function I(t){return t.getText(S).toString()}function N(t){var e=Object(c.useRef)(null),n=Object(c.useRef)(I(t.doc.yDoc));return Object(c.useEffect)((function(){var c=I(t.doc.yDoc);e.current.textContent!==c&&(e.current.textContent=c),n.current!==c&&(n.current=c)})),Object(g.jsx)("p",{contentEditable:t.editable?"true":"false",className:"editor ".concat(t.focused?"focused":""),onInput:function(e){var c=e.target.textContent;if(n.current!==c){var r=window.getSelection().getRangeAt(0).startOffset,o=k(n.current,c,r);o.length&&(n.current=c,t.onEditorChange({id:t.doc.id,actions:o}))}},ref:e})}n(41);function w(t){return"".concat(t.type," ").concat(t.pos," ").concat(t.str||t.len)}function E(t){function e(e,n){return function(){t.onSync({from:t.doc.id,to:e,index:n})}}return Object(g.jsx)("div",{className:"updates",children:t.doc.updates.map((function(n,c){return Object(g.jsxs)("p",{className:"update",children:[Object(g.jsx)("span",{className:"update-detail".concat(n.action.type===m?" insert":" delete"),children:w(n.action)}),t.editable&&t.docs.filter((function(t){return t&&!n.syncedIds.includes(t.id)})).map((function(t){return Object(g.jsxs)("button",{className:"sync-button",onClick:e(t.id,c),children:["To Doc",t.id]},t.id)}))]},c+w(n.action))}))})}var F={SHARE:"share",STORE:"store"},T=n(13),B=function(t){return new Error("Unexpected constructor: "+t)};function A(t,e){return Object(l.a)(Object(l.a)({client:t.id.client,clock:t.id.clock,type:t.content.constructor.name},function(t){return(4&t.info)>0?{deleted:!0}:{}}(t)),function(t,e){if(t instanceof e.ContentDeleted)return{len:t.len};if(t instanceof e.ContentAny)return{val:t.arr[t.arr.length-1]};if(t instanceof e.ContentType){if(t.type instanceof e.XmlElement)return t.type._map.size?{typeName:t.type.constructor.name,nodeName:t.type.nodeName,attrs:Object.fromEntries(t.type._map)}:{typeName:t.type.constructor.name,nodeName:t.type.nodeName};if(t.type instanceof e.XmlText)return t.type._map.size?{typeName:t.type.constructor.name,attrs:Object.fromEntries(t.type._map)}:{typeName:t.type.constructor.name}}if(t instanceof e.ContentString)return{str:t.str};if(t instanceof e.ContentFormat)return{key:t.key,value:t.value};throw B(t.constructor.name)}(t.content,e))}function U(t,e){if(t instanceof e.XmlFragment)return function(t,e){for(var n=[],c=t._start;null!==c;){var r=A(c,e);if(c.content instanceof e.ContentType)r.children=U(c.content.type,e);else if(!(c.content instanceof e.ContentAny||c.content instanceof e.ContentBinary||c.content instanceof e.ContentDeleted||c.content instanceof e.ContentEmbed||c.content instanceof e.ContentFormat||c.content instanceof e.ContentJSON||c.content instanceof e.ContentString))throw B(c.content.constructor.name);n.push(r),c=c.right}return n}(t,e);if(t instanceof e.Map)return function(t,e){var n,c={},r=Object(T.a)(t);try{for(r.s();!(n=r.n()).done;){var o=Object(p.a)(n.value,2),a=o[0],i=o[1];c[a]=U(i,e)}}catch(s){r.e(s)}finally{r.f()}return c}(t,e);if(t instanceof e.Array)return function(t,e){for(var n=[],c=t._start;null!==c;)n.push(R(c,e)),c=c.right;return n}(t,e);if(t instanceof e.XmlText)return function(t,e){for(var n=[],c=t._start;null!==c;)n.push(R(c,e)),c=c.right;return n}(t,e);if(t instanceof e.Text)return function(t,e){for(var n=[],c=t._start;null!==c;)n.push(R(c,e)),c=c.right;return n}(t,e);throw B(t.constructor.name)}function R(t,e){if(t instanceof e.Item)return A(t,e);if(t instanceof e.GC)return{client:(n=t).id.client,clock:n.id.clock,type:"GC",deleted:!0,length:n.length};var n;throw B(t.constructor.name)}function _(t,e){if(t instanceof e.Doc)return function(t,e){var n,c={share:{},store:{clients:{},pendingDs:null,pendingStructs:null}},r=Object(T.a)(t.share.entries());try{for(r.s();!(n=r.n()).done;){var o=Object(p.a)(n.value,2),a=o[0],i=o[1];c.share[a]=_(i,e)}}catch(h){r.e(h)}finally{r.f()}var s,u=Object(T.a)(t.store.clients.entries());try{for(u.s();!(s=u.n()).done;){var l=Object(p.a)(s.value,2),d=l[0],f=l[1];c.store.clients[d]=f.map((function(t){return R(t,e)}))}}catch(h){u.e(h)}finally{u.f()}return c}(t,e);if(t instanceof e.AbstractType)return U(t,e);if(t instanceof e.AbstractStruct)return R(t,e);throw B(t.constructor.name)}n(42);var M={ContentString:function(t){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"str",children:t.str})})},ContentDeleted:function(t){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"len",children:t.len})})}};function P(t){return Object(g.jsxs)("div",{children:["Unsupported struct type: ",t.type]})}function z(t){var e,n=t.struct;return Object(g.jsxs)("div",{className:"struct ".concat(n.type," ").concat(n.deleted||"ContentDeleted"===n.type?"deleted":""," ").concat(t.isFocusedClientId(n.client)?"focused":""),children:[Object(g.jsxs)("div",{className:"client",children:["Doc",null===(e=t.getDocByClientId(n.client))||void 0===e?void 0:e.id]}),Object(g.jsx)("div",{className:"clock",children:n.clock}),(M[n.type]||P)(n)]})}n(43);function G(t){var e=_(t.value,f);return Array.isArray(e)?Object(g.jsxs)("div",{className:"abstract-type",children:[Object(g.jsxs)("div",{className:"abstract-type-name",children:[t.name,":"]}),Object(g.jsx)("div",{className:"abstract-type-value",children:e.map((function(e){return Object(g.jsx)(z,{struct:e,isFocusedClientId:t.isFocusedClientId,getDocByClientId:t.getDocByClientId},"".concat(e.client,"-").concat(e.clock))}))})]}):Object(g.jsx)("div",{className:"abstract-type",children:"AbstractType not supported."})}function H(t){var e=Array.from(t.yDoc.share.keys());return Object(g.jsx)("div",{className:"data-source-share",children:e.map((function(e){return Object(g.jsx)(G,{name:e,value:t.yDoc.share.get(e),getDocByClientId:t.getDocByClientId,isFocusedClientId:t.isFocusedClientId},e)}))})}n(50);function J(t){return t.missing.map((function(t,e){return Object(g.jsxs)("p",{children:[Object(g.jsxs)("span",{className:"client-id",children:[e,":"]}),Object(g.jsx)("span",{children:t})]},e)}))}function L(t){return Array.from(t.clients.keys()).map((function(e){return Object(g.jsxs)("div",{className:"client-container",children:[Object(g.jsxs)("div",{className:"client-id",children:["clientID: ",e]}),Object(g.jsx)("div",{className:"client-structs",children:t.clients.get(e).map((function(e){var n=R(e,f);return Object(g.jsx)(z,{struct:n,isFocusedClientId:t.isFocusedClientId,getDocByClientId:t.getDocByClientId},"".concat(n.client,"-").concat(n.clock))}))})]},e)}))}function X(t){return Object(g.jsxs)("div",{className:"data-source-store",children:[t.yDoc.store.pendingStructs&&Object(g.jsxs)("div",{className:"pending-structs",children:[Object(g.jsx)("p",{children:"Missing:"}),Object(g.jsx)(J,{missing:t.yDoc.store.pendingStructs.missing})]}),Object(g.jsx)(L,{clients:t.yDoc.store.clients,isFocusedClientId:t.isFocusedClientId,getDocByClientId:t.getDocByClientId})]})}n(51);function W(t){return Object(g.jsx)("div",{className:"y-doc-model",children:t.dataSource===F.SHARE?Object(g.jsx)(H,{yDoc:t.yDoc,getDocByClientId:t.getDocByClientId,isFocusedClientId:t.isFocusedClientId}):Object(g.jsx)(X,{yDoc:t.yDoc,getDocByClientId:t.getDocByClientId,isFocusedClientId:t.isFocusedClientId})})}n(52);function Y(t){function e(e){var n=t.getDocByClientId(e);return(null===n||void 0===n?void 0:n.id)===t.focusedDocId}return Object(g.jsxs)("div",{className:"doc-container",onClick:t.onFocus,children:[Object(g.jsx)(D,{doc:t.doc,onCloseDoc:t.onCloseDoc,editable:t.editable}),Object(g.jsx)(N,{doc:t.doc,onEditorChange:t.onEditorChange,editable:t.editable,focused:e(t.doc.yDoc.clientID)}),Object(g.jsx)(E,{doc:t.doc,docs:t.docs,onSync:t.onSync,editable:t.editable}),Object(g.jsx)(W,{yDoc:t.doc.yDoc,dataSource:t.dataSource,getDocByClientId:t.getDocByClientId,isFocusedClientId:e})]})}function K(t){return Object(g.jsxs)("span",{className:"buttons-container",children:[Object(g.jsx)("span",{children:"Actions: "}),Object(g.jsx)("button",{onClick:function(){t.onOpenDoc()},children:"Open a new doc"})]})}var V=n(10),q=(n(53),"option-gc"),Q="option-pud";function Z(t){return t.target.value}function $(t){function e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z;return function(c){t.onOptionChange(Object(V.a)({},e,n(c)))}}return Object(g.jsxs)("span",{className:"options-container",children:[Object(g.jsx)("label",{htmlFor:q,children:"GC:"}),Object(g.jsx)("input",{id:q,type:"checkbox",checked:t.options.gc,onChange:e("gc",(function(t){return t.target.checked}))}),Object(g.jsx)("label",{htmlFor:Q,children:"PermanentUserData:"}),Object(g.jsx)("input",{id:Q,type:"checkbox",checked:t.options.pud,onChange:e("pud",(function(t){return t.target.checked}))})]})}function tt(t){return Object(g.jsxs)("div",{className:"actions-container",children:[Object(g.jsx)(K,{onOpenDoc:t.onOpenDoc}),Object(g.jsx)($,{options:t.options,onOptionChange:t.onOptionChange})]})}var et={DocEdit:[[j],[b,{id:0,actions:[{type:m,pos:0,str:"FOO"}]}],[b,{id:0,actions:[{type:x,pos:1,len:1}]}],[b,{id:0,actions:[{type:m,pos:1,str:"T"}]}],[b,{id:0,actions:[{type:m,pos:1,str:"B"}]}]],TwoDocsSyncWithoutConflicts:[[j],[j],[b,{id:0,actions:[{type:m,pos:0,str:"FOO"}]}],[y,{from:0,to:1}],[b,{id:1,actions:[{type:x,pos:1,len:1}]}],[b,{id:1,actions:[{type:m,pos:1,str:"T"}]}],[y,{from:1,to:0}]],TwoDocsSyncWithConflicts:[[j],[j],[b,{id:0,actions:[{type:m,pos:0,str:"FOO"}]}],[y,{from:0,to:1}],[b,{id:0,actions:[{type:m,pos:3,str:"B"}]}],[b,{id:1,actions:[{type:m,pos:3,str:"T"}]}],[y,{from:1,to:0}],[y,{from:0,to:1}]],TwoDocsSyncWithLostUpdates:[[j],[j],[b,{id:0,actions:[{type:m,pos:0,str:"FOO"}]}],[y,{from:0,to:1}],[b,{id:0,actions:[{type:m,pos:3,str:"B"}]}],[b,{id:0,actions:[{type:m,pos:4,str:"AR"}]}],[b,{id:1,actions:[{type:m,pos:3,str:"T"}]}],[y,{from:0,to:1,index:1}],[y,{from:1,to:0}],[y,{from:0,to:1,index:0}]]};function nt(t){return new Promise((function(e){setTimeout(e,t)}))}var ct=n(3),rt=n(0),ot=n(4),at=n(12),it=[function(){return new f.Array},function(){return new f.Map},function(){return new f.Text},function(t){rt.k(t)},function(t){},function(t){rt.k(t)},function(t){}];var st=[function(){throw at.c()},function(t){return{type:"deleted",length:rt.l(t)}},function(t){for(var e=rt.l(t),n=[],c=0;c<e;c++){var r=rt.k(t);"undefined"===r?n.push(void 0):n.push(JSON.parse(r))}return{type:"json",content:n,length:e}},function(t){return{type:"binary",content:rt.m(t),length:1}},function(t){var e=rt.k(t);return{type:"string",string:e,length:e.length}},function(t){return{type:"embed",content:rt.k(t),length:1}},function(t){return{type:"format",content:{key:rt.k(t),value:rt.k(t)},length:1}},function(t){return{type:"type",content:it[rt.l(t)](t),length:1}},function(t){for(var e=rt.l(t),n=[],c=0;c<e;c++){var r=rt.h(t);n.push(r)}return{type:"any",content:n,length:e}}];function ut(t){t instanceof rt.a||(t=rt.f(t));for(var e={clients:{}},n=rt.l(t),c=0;c<n;c++){var r=rt.l(t),o=rt.l(t);if(o>0){e.clients[r]=[];for(var a=0;a<o;a++)e.clients[r].push({clock:rt.l(t),length:rt.l(t)})}}return e}function lt(t){var e=rt.f(t);return{clientsStructs:function(t){for(var e={},n=rt.l(t),c=0;c<n;c++){for(var r=rt.l(t),o=[],a=dt(t),i=a.clock,s=a.client,u=0;u<r;u++){var l=rt.i(t),d=void 0;d=0!==(ot.i&l)?ft(s,i,t,l):new pt(s,i,{length:rt.l(t)}),o.push(d),i+=d.length}e[s]=o}return e}(e),deleteSet:ut(e)}}function dt(t){return{client:rt.l(t),clock:rt.l(t)}}var pt=function t(e,n,c,r,o,a,i,s,u){var l=this;Object(ct.a)(this,t),this.client=e,this.clock=n,this.left=r,this.origin=o,this.right=a,this.rightOrigin=i,this.parentYKey=s,this.parent=u,Object.keys(c).forEach((function(t){l[t]=c[t]}))};function ft(t,e,n,c){var r=(c&ot.g)===ot.g?dt(n):null,o=(c&ot.f)===ot.f?dt(n):null,a=0===(c&(ot.f|ot.g)),i=!!a&&1===rt.l(n),s=a&&i?rt.k(n):null,u=null;a&&!i&&(u=dt(n)),a&&(c&ot.e)===ot.e&&rt.k(n);var l=function(t,e){return st[e&ot.i](t)}(n,c);return new pt(t,e,l,null,r,null,o,s,u)}function ht(t){function e(e){t.onOptionChange({dataSource:e.target.value})}return Object(g.jsxs)("div",{className:"view-options-container",children:[Object(g.jsx)("label",{children:"Data source:"}),[{id:F.SHARE,label:"Share"},{id:F.STORE,label:"Store"}].map((function(n){return Object(g.jsxs)("span",{children:[Object(g.jsx)("input",{id:n.id,type:"radio",value:n.id,checked:t.options.dataSource===n.id,onChange:e}),Object(g.jsx)("label",{htmlFor:n.id,children:n.label})]},n.id)}))]})}n(54);function jt(){var t,e=Object(c.useState)((t="scenario",new URL(window.location.href).searchParams.get(t)||h)),n=Object(p.a)(e,2),r=n[0],o=n[1],a=Object(c.useState)(0),i=Object(p.a)(a,2),v=i[0],D=i[1],k=Object(c.useState)([]),I=Object(p.a)(k,2),N=I[0],w=I[1],E=Object(c.useState)({gc:!1,pud:!1}),T=Object(p.a)(E,2),B=T[0],A=T[1],U=Object(c.useState)({dataSource:F.SHARE}),R=Object(p.a)(U,2),_=R[0],M=R[1],P=Object(c.useState)(null),z=Object(p.a)(P,2),G=z[0],H=z[1];function J(t){w(t),window.docs=t}function L(t,e){return X.apply(this,arguments)}function X(){return(X=Object(d.a)(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=[],t.t1=Object(u.a)(N.slice(0,e)),t.next=4,n(N[e]);case 4:t.t2=t.sent,t.t3=[t.t2],t.t4=Object(u.a)(N.slice(e+1)),J(t.t0.concat.call(t.t0,t.t1,t.t3,t.t4));case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(){return(W=Object(d.a)(s.a.mark((function t(){var e,n,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D(v+1),e=et[r],n=Object(p.a)(e[v],2),c=n[0],o=n[1],t.t0=c,t.next=t.t0===j?6:t.t0===b?9:t.t0===y?12:t.t0===O?15:18;break;case 6:return t.next=8,K();case 8:return t.abrupt("break",19);case 9:return t.next=11,Z(o);case 11:return t.abrupt("break",19);case 12:return t.next=14,ct(o);case 14:return t.abrupt("break",19);case 15:return t.next=17,q(o);case 17:return t.abrupt("break",19);case 18:throw new Error("Unexpected action: "+c);case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(){return V.apply(this,arguments)}function V(){return(V=Object(d.a)(s.a.mark((function t(){var e,n,c,r,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=new f.Doc).gc=B.gc,n=N.length,c=f.encodeStateAsUpdate(e),(r=N.filter(Boolean)).length&&n!==r[0].id&&f.applyUpdate(e,f.encodeStateAsUpdate(r[0].yDoc)),o=null,!B.pud){t.next=12;break}return(o=new f.PermanentUserData(e)).setUserMapping(e,e.clientID,"Doc".concat(n)),t.next=12,nt(0);case 12:r.forEach((function(t){f.applyUpdate(t.yDoc,c)})),J([].concat(Object(u.a)(N),[{id:n,yDoc:e,pud:o,updates:[]}]));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t){return Q.apply(this,arguments)}function Q(){return(Q=Object(d.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.yDoc.destroy(),t.next=3,L(e.id,(function(){return null}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t){return $.apply(this,arguments)}function $(){return($=Object(d.a)(s.a.mark((function t(e){var n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,c=e.actions,t.next=3,L(n,function(){var t=Object(d.a)(s.a.mark((function t(e){var r,o,a,i,d,p,h,j,b,y,O,g;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=[],o=f.encodeStateVector(e.yDoc),a=0;case 3:if(!(a<c.length)){t.next=26;break}i=c[a],d=i.type,p=i.pos,h=i.str,j=i.len,b=e.yDoc.getText(S),t.t0=d,t.next=t.t0===m?10:t.t0===x?12:14;break;case 10:return b.insert(p,h),t.abrupt("break",15);case 12:return b.delete(p,j),t.abrupt("break",15);case 14:throw new Error("Unexpected type");case 15:return t.next=17,nt(0);case 17:y=f.encodeStateAsUpdate(e.yDoc,o),O=lt(y),(g={items:O.clientsStructs[e.yDoc.clientID]||[],deleteSet:O.deleteSet.clients[e.yDoc.clientID]||[]}).items.forEach((function(t){if("binary"===t.type){var e=ut(t.content);Object.keys(e).length&&(t.decodedContent=e),t.content="[...]"}})),console.log("update",g),r.push({action:i,payload:y,syncedIds:[n]});case 23:a++,t.next=3;break;case 26:if(1!==N.length){t.next=28;break}return t.abrupt("return",e);case 28:return t.abrupt("return",Object(l.a)(Object(l.a)({},e),{},{updates:[].concat(Object(u.a)(e.updates),r)}));case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t){return rt.apply(this,arguments)}function rt(){return(rt=Object(d.a)(s.a.mark((function t(e){var n,c,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.from,c=e.to,r=e.index,t.next=3,L(n,(function(t){if(t){var e=N[c],n=void 0===r?t.updates:[t.updates[r]];return n.forEach((function(t){f.applyUpdate(e.yDoc,t.payload)})),Object(l.a)(Object(l.a)({},t),{},{updates:t.updates.map((function(t){return n.includes(t)?t.syncedIds.includes(c)?t:Object(l.a)(Object(l.a)({},t),{},{syncedIds:[].concat(Object(u.a)(t.syncedIds),[c])}):t})).filter((function(t){return t.syncedIds.length!==N.filter(Boolean).length}))})}}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(t){return N.find((function(e){return e.yDoc.clientID===t}))}function at(t){return function(){H(t.id)}}var it=r===h;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(C,{scenarios:et,currentScenario:r,currentScenarioStepIndex:v,onScenarioChange:function(t){o(t),D(0),J([])},onNextStep:function(){return W.apply(this,arguments)},onRestartStep:function(){D(0),J([])},onOpenDoc:K}),!et[r]&&Object(g.jsx)(tt,{onOpenDoc:K,options:B,onOptionChange:function(t){A(Object(l.a)(Object(l.a)({},B),t))}}),Object(g.jsx)(ht,{options:_,onOptionChange:function(t){M(Object(l.a)(Object(l.a)({},_),t))}}),Object(g.jsx)("div",{className:"docs-container",children:N.filter(Boolean).map((function(t){return Object(g.jsx)(Y,{doc:t,docs:N,editable:it,dataSource:_.dataSource,onCloseDoc:q,onEditorChange:Z,onSync:ct,getDocByClientId:ot,onFocus:at(t),focusedDocId:G},t.id)}))})]})}a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(jt,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.e207a2eb.chunk.js.map